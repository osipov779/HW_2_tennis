# HW_2_tennis
<a> Алексей Осипов</a>



<h1 align="center">Аналитика данных. Домашнее задание 2 (HW) Тенисные партии</h1>
<p align="center">Научиться анализировать данныею.


## Оглавление
[Описание проекта](#описание-проекта) | [Описание данных](#описание-данных) | [Задачи от заказчика](#задачи-проекта) | [Критерии оценки](#критерии-оценки-результата)

[План работы](#план-работы) | [Результаты](#результаты) 

[Выводы](#выводы)

## Описание проекта
Практическая отработка выбора тестов статистической достоверности на определенных заказчиком задачах для проверки статистических гипотез.

## Описание данных
[![GitHub Repo](https://img.shields.io/badge/-dataset_tennis_atp-blue?style=flat&logo=github)](https://github.com/JeffSackmann/tennis_atp)

> Требуются только данные из одиночного разряда игры в теннис (файлы в формате «`atp_matches_YYYY.csv`»)

The player file columns are `player_id`, `first_name`, `last_name`, `hand`, `birth_date`, `country_code`, `height` (cm).

The columns for the ranking files are `ranking_date`, `ranking`, `player_id`, `ranking_points` (where available).

## Задачи
Желательно сопровождать выбранный статистический тест ссылкой на его документацию и указывать нулевую гипотезу, которую этот тест проверяет

### 1.
> Вы хотите узнать, как много значит ранг игрока в теннисе. Проверьте следующие утверждения:

>а) Если ранг игрока выше более, чем на 20 позиций, то в среднем он будет выигрывать с большей вероятностью. (Если хотите проверить статистически — формируйте выборку как отклонение от ожидаемого количества побед при случайном исходе);

>б) Если ранг игрока находится в окне +-5 позиций, то вероятность победы будет значительно отличаться от гипотезы из предыдущего случая. Для проверки статистической значимости выборку можно сделать как среднее по годам (например, с 1980 по 2022г.). Подумайте, как правильно сформировать репрезентативную выборку.

### 2.
>Правда ли, что среднее количество сетов, которое необходимо любому игроку для победы в матче, сокращается со временем? Разбейте данные на две группы — с 1980 до 2001 гг. и 2002-2022 гг. Как изменилось среднее количество сетов, которое победитель затратил на игру? Является ли разница средних этих двух выборок статистически значимой? Выбор статистического теста обоснуйте.

### 3.
>У вас появились сомнения — не является ли результат, который вы посчитали на предыдущем шаге, некорректным. Кажется, что на это мог повлиять формат самого матча — best of 3 или best of 5. Оставьте только матчи best of 5 (колонка best_of) и определите — является ли разница среднего количества сетов, которое сыграл победитель, значимой для выборок матчей по 1980 до 2001 гг. и 2002-2022 гг. Выбор статистического теста обоснуйте.

### 4.
>Вы хотите изучить психологическую устойчивость профессиональных игроков в теннис. Одним из важных показателей такой устойчивости будет доля выигранных брейк-поинтов. Возьмите трех игроков (они необязательно должны играть в одно и то же время. Можете взять игроков, которые сильно отличаются по рангу, а можете взять примерно равных игроков), для каждого из них посчитайте долю выигранных брейк поинтов (колонки, заканчивающиеся на bpFaced и bpSaved) отдельно в победных и проигранных матчах за минимум 10 лет (можно больше, но годы должны идти подряд). Постройте box-plot’ы для этих статистик для каждого из игроков. Являются ли эти распределения по годам (по победным и по проигранным матчам) независимыми для каждого из игроков? Если сравнивать эту статистику между игроками — будет ли разница в средних для проигранных и выигранных матчей значимой попарно между всеми игроками? Выбор статистического теста обоснуйте.

### 5.
>У вас есть гипотеза, что доля выигранных брейк-поинтов связана с вероятностью победить в игре. Соберите статистику, где для каждого матча будет собран его исход (победа/поражение) и доля выигранных брейк-поинтов (не забудьте, что в матче два игрока). Разделите долю выигранных брейкпоинтов на группы выше/ниже медианы и, используя информацию о исходе матча, проверьте зависимость между количеством выигранных брейкпоинтов и результатом матча. Насколько сильна эта зависимость? Выбор статистического теста обоснуйте.

## Критерии оценки результата
```python
Критерий 1. Правильность решения.
```

* Необходимо убедиться, что данные обработаны верно, выдача соответствует условию задачи.
* Любая ошибка в выборе статистического теста — -1 балл за задачу.
* Если сделан t-test — должно быть обоснование, что размер выборки достаточен (>30 семплов), статистика распределена нормально (displot/histplot/distplot/QQ-plot и т.д.), проверено равенство дисперсий в случае парного Т-теста (сделан тест Фишера, либо это совсем очевидно).
* Остальные тесты не требуют особых доказательств, достаточно какой-либо цитаты о том, где применяется тест или ссылки на документацию, например, так.
* Измененная задача/текст или условия задачи/assert — 0 баллов за задачу.

| Описание                                                                                       | Баллы    |
| ---------------------------------------------------------------------------------------------- | -------- |
| Задача решена верно                                                                            | 2 балла  |
| Ошибка в выборе статистического теста или другая минорная ошибка                              | 1 балл   |
| Задача решена неверно (используются неверные выборки — нарушена последовательность в годах, ошибка в расчетах, перепутаны игроки и т.д.) | 0 баллов |

```python
Критерий 2. Правильность оформления решения по PEP8.
```
| Описание                                   | Баллы   |
| ------------------------------------------ | ------- |
| Код красивый и правильный, есть несколько мелких помарок | 10 баллов |
| Нарушения PEP8 примерно в 20% случаев      | 8 баллов  |
| Нарушения PEP8 примерно в 50% случаев      | 5 баллов  |
| PEP8 нет                                   | 0 баллов  |

## План работы
- Шаг 1: Подготовка данных
    - Загрузка данных
    - Оценка качества данных (Пропуски и дубликаты)
  
- Шаг 2: Формулирование гипотез
    - Нулевая гипотеза
    - Альтернативная гипотеза

- Шаг 3: Определение характеристик выборки
    - Размер, среднее, дисперсия и тд

- Шаг 4: Определение подходящих тестов
    - Обоснование выбора теста
    - Проведение теста
    - Принятие или отклонение нулевой гипотезы

- Шаг 5: Формулирование выводов


## Результаты
Код решения приложен в ноутбуке

## Выводы
В ходе проделанной работы получен навых формирования выборок для исследований, выбор тестов для исследования гипотез и сравнения выборок. Главным выводом можно считать не однозначность в выборе подходящего теста, тк во многом выбор теста зависит от контекста задачи и вариантов можети быть несколько.
